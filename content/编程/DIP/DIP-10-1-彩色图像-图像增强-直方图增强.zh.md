---
title: 【数字图像处理】10.1:彩色图像-图像增强 直方图增强
date: 2015-03-17 14:34
categories:
  - DIP
tags:
  - 直方图均衡
  - 彩色图像增强
  - 彩色图像直方图
toc: true
---
**Abstract:** 数字图像处理：第70天
**Keywords:** 彩色图像直方图
<!--more-->
<font color="00FF00">本文最初发表于csdn，于2018年2月17日迁移至此</font>
# 彩色图像-图像增强 直方图增强
继续简单的介绍一下彩色图像处理相关的知识，今天来简单的说下直方图增强在彩色图像中的应用，灰度图像直方图增强在[此处](http://face2ai.com/DIP-5-10-灰度图像-图像增强-直方图均衡化HistogramEqualization/)做了相关介绍，包括其数学原理。
对于灰度图像中的一些算法适合直接用到彩色图像的各个通道，也有一些不适合，直方图均衡就属于不适合的一种，如果直接将其作用在各个通道上，将引起图像色相的变化因此也就是图像变的不是其原来的样子了，今天我们将直方图均衡用到HSI色彩空间的I分量上，直方图对亮度分量进行均衡，是图像在亮度上得到增强，在饱和度和色向上保持不变。
## 算法原理
算法的原理就是利用HSI色彩空间的特点，I分量代表图像亮度，处理后不会改变图像色相。

算法步骤：
1. 从RGB转换到HSI
2. 分离HSI空间，I分量形成一个单独的灰度图像$f_i$
3. 对$f_i$进行直方图均衡
4. 用均衡后的数据代替原I分量数据
5. HSI转换回RGB

## 代码
```c++
void HistEqualRGB(RGB *src,RGB *dst,int width,int height){
    HSI *temp=(HSI*)malloc(sizeof(HSI)*width*height);
    double *chanel_i=(double *)malloc(sizeof(double)*width*height);
    RGB2HSI(src, temp, width, height);
    for(int i=0;i<width*height;i++){
        chanel_i[i]=(double)((int)temp[i].c3);
    }
    HistogramEqualization(chanel_i, chanel_i, width, height);
    for(int i=0;i<width*height;i++){
        temp[i].c3=chanel_i[i];
    }
    HSI2RGB(temp, dst, width, height);
    free(temp);
    free(chanel_i);

}
```
## 效果分析
下面对一些图片进行上述算法操作，来观察效果。
原图：
![](./20150317141950020.jpeg)

原图I分量：
![](./20150317142452153.jpeg)

原图I分量直方图：
![](./20150317142511762.jpeg)

直方图均衡后结果：
![](./20150317142400327.jpeg)

直方图均衡后直方图：
![](./20150317142543633.jpeg)

处理后结果：
![](./20150317142516004.jpeg)


-------
原图：
![](./20150317142713677.jpeg)

原图I分量：
![](./20150317142739916.jpeg)

原图I分量直方图：
![](./20150317142628342.jpeg)

直方图均衡后结果：
![](./20150317142646797.jpeg)

直方图均衡后直方图：
![](./20150317142710665.jpeg)

处理后结果：
![](./20150317142726218.jpeg)


-------
原图：
![](./20150317142801256.jpeg)

原图I分量：
![](./20150317142813439.jpeg)

原图I分量直方图：
![](./20150317142850302.jpeg)

直方图均衡后结果：
![](./20150317142832050.jpeg)

直方图均衡后直方图：
![](./20150317142920364.jpeg)

处理后结果：
![](./20150317142938882.jpeg)


-------
原图：
![](./20150317143006370.jpeg)

原图I分量：
![](./20150317143018023.jpeg)

原图I分量直方图：
![](./20150317143158533.jpeg)

直方图均衡后结果：
![](./20150317143215443.jpeg)

直方图均衡后直方图：
![](./20150317143117974.jpeg)

处理后结果：
![](./20150317143133590.jpeg)


## 总结
总体来说算法效果稳定，计算速度快，但这只是一种最简单的彩色图像增强的方法，因为已经决定以后做识别方向，所以彩色图像的相关更深入的彩色变换，平滑，锐化，分割等只做简单介绍，大家多多交流。
待续。。。





